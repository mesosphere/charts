---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "konvoyaddons.fullname" . }}
  labels:
{{ include "konvoyaddons.labels" . | indent 4 }}
data:
  {{- if .Values.config.clusterHostname }}
  clusterHostname: {{ .Values.config.clusterHostname }}
  {{- else }}
  clusterHostname: ""
  {{- end }}
  {{- if .Values.config.externalDex }}
  externalDex: {{ toYaml .Values.config.externalDex | nindent 4 }}
  {{- end }}
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: konvoy-kubeaddons
  namespace: kubeaddons
  labels:
    app.kubernetes.io/name: kubeaddons
    app.kubernetes.io/component: controller
    kubeaddons.d2iq.com/priority: "0"
  data: |
    ---
    {{- if .Values.ClusterDomainNames }}
    ClusterDomainNames:
    {{- range $name := .Values.ClusterDomainNames }}
      - {{ $name }}
    {{- end }}
    {{- else if .Values.config.clusterHostname }}
    clusterDomainNames:
      - {{ .Values.config.clusterHostname }}
    {{- else }}
    clusterDomainNames: []
    {{- end }}
