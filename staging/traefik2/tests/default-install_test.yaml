suite: default install
tests:
  - it: should generate the default objects for Traefik Ingress Controller
    asserts:
      - isKind:
          of: Deployment
        template: deployment.yaml
      - isKind:
          of: Service
        template: service.yaml
      - isKind:
          of: ClusterRole
        template: rbac/clusterrole.yaml
      - isKind:
          of: ClusterRoleBinding
        template: rbac/clusterrolebinding.yaml
      - isKind:
          of: ServiceAccount
        template: rbac/serviceaccount.yaml
      - isKind:
          of: CustomResourceDefinition
        template: crd/ingressroute.yaml
      - isKind:
          of: CustomResourceDefinition
        template: crd/ingressroutetcp.yaml
      - isKind:
          of: CustomResourceDefinition
        template: crd/middlewares.yaml
      - isKind:
          of: CustomResourceDefinition
        template: crd/tlsoptions.yaml
      - isKind:
          of: CustomResourceDefinition
        template: crd/traefikservices.yaml
  - it: should have the correct naming for each object
    asserts:
      - equal:
          path: metadata.name
          value: RELEASE-NAME-traefik
        template: deployment.yaml
      - equal:
          path: metadata.name
          value: RELEASE-NAME-traefik
        template: service.yaml
      - equal:
          path: metadata.name
          value: RELEASE-NAME-traefik
        template: rbac/clusterrole.yaml
      - equal:
          path: metadata.name
          value: RELEASE-NAME-traefik
        template: rbac/clusterrolebinding.yaml
      - equal:
          path: metadata.name
          value: RELEASE-NAME-traefik
        template: rbac/serviceaccount.yaml
      - equal:
          path: metadata.name
          value: ingressroutes.traefik.containo.us
        template: crd/ingressroute.yaml
      - equal:
          path: metadata.name
          value: ingressroutetcps.traefik.containo.us
        template: crd/ingressroutetcp.yaml
      - equal:
          path: metadata.name
          value: middlewares.traefik.containo.us
        template: crd/middlewares.yaml
      - equal:
          path: metadata.name
          value: tlsoptions.traefik.containo.us
        template: crd/tlsoptions.yaml
      - equal:
          path: metadata.name
          value: traefikservices.traefik.containo.us
        template: crd/traefikservices.yaml
