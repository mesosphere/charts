{{- range $app, $config := .Values.dkp }}
{{- if $config.enabled }}
---
apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: {{ $config.bucketName }}
  labels: 
    {{ include "object-bucket-claim.labels" $ | nindent 4 }}
    {{- if $config.labels }}
    {{ toYaml $config.labels | nindent 4 }}
    {{- end }}
spec:
  # To create a new bucket specify either `bucketName` or
  # `generateBucketName` here. Both cannot be used. To access
  # an existing bucket the bucket name needs to be defined in
  # the StorageClass referenced here, and both `bucketName` and
  # `generateBucketName` must be omitted in the OBC.
  bucketName: {{ $config.bucketName }}
  storageClassName: {{ $config.storageClassName }}
  {{- if $config.additionalConfig }}
    # To set for quota for OBC
  additionalConfig:
    {{- toYaml $config.additionalConfig | nindent 4 }}
  {{- end }}
{{- end }}
{{- end }}
