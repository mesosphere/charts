---
apiVersion: v1
kind: ConfigMap
metadata:
  name: local-volume-provisioner-configmap
  namespace: {{ .Release.Namespace }}
data:
  storageClassMap: |
{{- range .Values.global.storageClasses }}
{{- if eq .type "localvolumeprovisioner" }}
    {{ .name }}:
       hostDir: {{ .parameters.mountPath }}
       mountDir: {{ .parameters.mountPath }}
       blockCleanerCommand:
         - "/scripts/shred.sh"
         - "2"
       volumeMode: Filesystem
       fsType: ext4
{{- end }}
{{- end }}
